<template>
  <require from="../radar/radar"></require>
  <require from="../markdown"></require>
  <require from="../radar/legendsidebar"></require>
  <require from="../radar/technologysheet"></require>
  <section class="au-animate" style="overflow: hidden;">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-12">
          <div class="rounded-separator-h1-top"></div>
          <h1>
            <i class="fa fa-line-chart" aria-hidden="true"></i> Trend: ${trend.Name}</h1>
          <div class="rounded-separator-h1-bottom"></div>
        </div>
      </div>
      <!-- Radar -->
      <div class="row">
        <div class="col-lg-12">
          <radar view="trend" if.one-time="!mobile" trend="${trend.id}"></radar>
        </div>
      </div>
      <div class="row">
        <!-- Trend description -->
        <div class="col-lg-8">
          <!-- <div class="trend-title-image" style="background-repeat: no-repeat; background-position: 100%;background-size: cover;background-image: url('img/trends/${trend.ImageUrl}'); "></div> -->
          <div markdown.bind="trend.Description"></div>
        </div>
        <!-- Legend and related topics -->
        <div class="col-lg-3">
          <div class="related">
            <div class="rounded-separator-h3-top"></div>
            <h3>Legend</h3>
            <div class="rounded-separator-h3-bottom"></div>
            <legendsidebar></legendsidebar>
          </div>
          <div class="related">
            <div class="rounded-separator-h3-top"></div>
            <h3>Related Technologies</h3>
            <div class="rounded-separator-h3-bottom"></div>
            <div class="related">
              <h2>
                <span repeat.for="tt of trend._Technologies">
                  <label class="label label-default label-button" click.trigger="selectTechnology(tt)">
                    <i class="fa fa-wrench" aria-hidden="true"></i>
                    ${tt.Technology}</label>
                  <span click.trigger="removeTrendTechnology(tt)" if:bind="appState.adminMode" class="fa fa-remove platform-technology"></span>
                  <span click.trigger="editTechnology(tt)" if:bind="appState.adminMode" class="fa fa-edit platform-technology"></span>
                </span>
                <div if:bind="appState.adminMode">
                  <select style="width:300px;float:left;margin-top:3px" value.bind="selectedTech">
                    <option repeat.for="tech of appState.project.technologies">${tech.Technology}</option>
                  </select>
                  <button type="button" click.trigger="addTechnology()" class="btn btn-primary fa fa-plus" style="float:left; margin:5px"></button>
                </div>
              </h2>
            </div>
          </div>
          <div class="">
            <div class="rounded-separator-h3-top"></div>
            <h3>Related Platforms</h3>
            <div class="rounded-separator-h3-bottom"></div>
            <div class="related">
              <h2>
                <span repeat.for="p of platforms">
                  <label class="label label-default label-button" click.trigger="appState.selectPlatform(p)">
                    <i class="fa fa-th-large" aria-hidden="true"></i>
                    ${p.Name}</label>
                </span>
              </h2>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div if.one-time="!mobile">
      <div click.trigger="prevTrend()" class="trendNavigation prevTrend">
        <i class="fa fa-arrow-left"></i>
      </div>
      <div click.trigger="nextTrend()" class="trendNavigation nextTrend">
        <i class="fa fa-arrow-right"></i>
      </div>
    </div>
    <technologysheet></technologysheet>
  </section>
</template>
